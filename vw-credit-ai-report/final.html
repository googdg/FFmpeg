<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§ä¼—æ±½è½¦é‡‘è - AIä¿¡å®¡æŠ¥å‘Šç³»ç»Ÿ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif; background: #f5f5f5; color: #333; }
        .toolbar { position: fixed; top: 0; left: 0; right: 0; height: 60px; background: #001e50; color: white; display: flex; justify-content: space-between; align-items: center; padding: 0 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); z-index: 1000; }
        .toolbar h1 { font-size: 18px; font-weight: 600; }
        .toolbar-right { display: flex; gap: 16px; align-items: center; }
        .case-selector { padding: 8px 16px; border: 1px solid rgba(255,255,255,0.3); border-radius: 4px; background: rgba(255,255,255,0.1); color: white; font-size: 14px; cursor: pointer; }
        .btn { padding: 8px 20px; border: none; border-radius: 4px; font-size: 14px; cursor: pointer; background: #00b0f0; color: white; }
        .btn:hover { background: #0099d6; }
        .report-container { max-width: 1200px; margin: 80px auto 40px; background: white; box-shadow: 0 2px 16px rgba(0,0,0,0.1); padding: 32px; }
        .report-header { display: flex; justify-content: space-between; padding-bottom: 24px; border-bottom: 3px solid #001e50; margin-bottom: 32px; }
        .header-title h2 { font-size: 24px; color: #001e50; margin-bottom: 8px; }
        .report-section { margin-bottom: 32px; padding: 24px; border: 1px solid #e0e0e0; border-radius: 8px; }
        .section-title { font-size: 18px; font-weight: 600; color: #001e50; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
        .overview-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
        .overview-item { display: flex; gap: 8px; }
        .overview-item label { font-weight: 500; color: #666; min-width: 80px; }
        .risk-score { width: 200px; height: 200px; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; margin: 24px auto; color: white; box-shadow: 0 8px 16px rgba(0,0,0,0.2); transition: all 0.3s; }
        .risk-score.level-a { background: linear-gradient(135deg, #00c853, #00e676); }
        .risk-score.level-b { background: linear-gradient(135deg, #2196f3, #64b5f6); }
        .risk-score.level-c { background: linear-gradient(135deg, #ffc107, #ffeb3b); color: #333; }
        .score-value { font-size: 48px; font-weight: bold; }
        .score-label { font-size: 14px; margin-top: 8px; }
        .risk-level { font-size: 18px; font-weight: 600; margin-top: 8px; padding: 4px 16px; background: rgba(255,255,255,0.2); border-radius: 20px; }
        .rag-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
        .rag-item { padding: 16px; background: #f5f5f5; border-radius: 8px; }
        .rag-item strong { display: block; color: #001e50; margin-bottom: 8px; }
        .recommendations-list { display: flex; flex-direction: column; gap: 16px; }
        .recommendation-item { display: flex; gap: 16px; padding: 16px; background: #f5f5f5; border-left: 4px solid #ff9800; border-radius: 4px; }
        .recommendation-number { width: 32px; height: 32px; background: #001e50; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0; }
        .highlight { color: #0066cc; font-weight: 600; font-size: 16px; }
        .decision-box { padding: 16px; border-radius: 8px; border-left: 4px solid; }
        .decision-approve { background: #e8f5e9; border-left-color: #00c853; }
        .decision-conditional { background: #fff3e0; border-left-color: #ffc107; }
    </style>
</head>
<body>
    <div class="toolbar">
        <h1>ğŸš— å¤§ä¼—æ±½è½¦é‡‘è - AIä¿¡å®¡æŠ¥å‘Šç³»ç»Ÿ</h1>
        <div class="toolbar-right">
            <select class="case-selector" onchange="switchCase(this.value)">
                <option value="case1">æ¡ˆä¾‹1 - ä¼˜è´¨å®¢æˆ·(Açº§) è¯„åˆ†850</option>
                <option value="case2" selected>æ¡ˆä¾‹2 - è‰¯å¥½å®¢æˆ·(Bçº§) è¯„åˆ†720</option>
                <option value="case3">æ¡ˆä¾‹3 - ä¸€èˆ¬å®¢æˆ·(Cçº§) è¯„åˆ†580</option>
                <option value="case4">æ¡ˆä¾‹4 - å…³æ³¨å®¢æˆ·(Dçº§) è¯„åˆ†420</option>
                <option value="case5">æ¡ˆä¾‹5 - æ‹’ç»å®¢æˆ·(Eçº§) è¯„åˆ†280</option>
            </select>
            <button class="btn" onclick="window.print()">ğŸ–¨ï¸ æ‰“å°</button>
            <button class="btn" onclick="exportToPDF()" id="exportBtn">ğŸ“„ å¯¼å‡ºPDF</button>
        </div>
    </div>

    <div class="report-container">
        <div class="report-header">
            <div class="header-title">
                <h2>å¤§ä¼—æ±½è½¦é‡‘è</h2>
                <p>AIæ™ºèƒ½ä¿¡å®¡æŠ¥å‘Š</p>
            </div>
            <div>
                <p><strong>æŠ¥å‘Šæ—¥æœŸï¼š</strong>2024-11-12</p>
                <p><strong>æŠ¥å‘Šç¼–å·ï¼š</strong><span id="reportNum">CA20241112002</span></p>
            </div>
        </div>

        <div class="report-section">
            <h3 class="section-title">ğŸ‘¤ å®¢æˆ·æ¦‚è§ˆ</h3>
            <div class="overview-grid">
                <div class="overview-item"><label>å§“åï¼š</label><span id="name">æ**</span></div>
                <div class="overview-item"><label>æ€§åˆ«ï¼š</label><span id="gender">å¥³</span></div>
                <div class="overview-item"><label>å¹´é¾„ï¼š</label><span id="age">32å²</span></div>
                <div class="overview-item"><label>ç”³è¯·äº§å“ï¼š</label><span id="product">æ–°è½¦è´·æ¬¾</span></div>
                <div class="overview-item"><label>ç”³è¯·é‡‘é¢ï¼š</label><span class="highlight" id="amount">Â¥250,000</span></div>
                <div class="overview-item"><label>è´·æ¬¾æœŸé™ï¼š</label><span id="term">36æœŸ</span></div>
            </div>
        </div>

        <div class="report-section">
            <h3 class="section-title">âš ï¸ é£é™©è¯„ä¼°</h3>
            <div class="risk-score level-b" id="riskScore">
                <div class="score-value" id="score">720</div>
                <div class="score-label">ç»¼åˆè¯„åˆ†</div>
                <div class="risk-level" id="level">è‰¯å¥½å®¢æˆ·</div>
            </div>
            <p style="text-align: center; color: #666;" id="indicators">
                DSR: 42% | LTV: 75% | æœˆæ”¶å…¥: Â¥22,000 | å¾ä¿¡åˆ†: 690 | é€¾æœŸ: 0æ¬¡
            </p>
        </div>

        <div class="report-section">
            <h3 class="section-title">ğŸ¤– AIæ™ºèƒ½ä¿¡æ¯æ±‡æ€» <span style="font-size: 11px; background: #00b0f0; color: white; padding: 2px 8px; border-radius: 12px; font-weight: normal;">RAGæŠ€æœ¯</span></h3>
            <div class="rag-grid">
                <div class="rag-item"><strong>ğŸ“Š è´¢æŠ¥æ‘˜è¦ï¼š</strong><p id="ragFinancial">ä¼ä¸šç»è¥ç¨³å®šï¼Œè¥æ”¶ç•¥æœ‰æ³¢åŠ¨ä½†æ•´ä½“å‘å¥½</p></div>
                <div class="rag-item"><strong>ğŸ” ç¬¬ä¸‰æ–¹æ•°æ®ï¼š</strong><p id="ragThirdParty">å¾ä¿¡è®°å½•è‰¯å¥½ï¼Œæ— é€¾æœŸ</p></div>
                <div class="rag-item"><strong>ğŸ“° èˆ†æƒ…ç›‘æµ‹ï¼š</strong><p id="ragSentiment">æœªå‘ç°é‡å¤§è´Ÿé¢ä¿¡æ¯</p></div>
            </div>
        </div>

        <div class="report-section">
            <h3 class="section-title">ğŸ¯ AIå»ºè®®å®¡æ ¸æ–¹å‘</h3>
            <div class="recommendations-list" id="recommendations"></div>
        </div>

        <div class="report-section">
            <h3 class="section-title">âœ… å®¡æ‰¹å»ºè®®</h3>
            <div class="decision-box decision-conditional" id="decisionBox">
                <p style="font-size: 18px; font-weight: 600; margin-bottom: 16px;">
                    å»ºè®®å†³ç­–ï¼š<span id="decision">âš ï¸ æœ‰æ¡ä»¶æ‰¹å‡†</span>
                </p>
                <p id="loanRange"><strong>å»ºè®®é¢åº¦ï¼š</strong>Â¥200,000 - Â¥250,000</p>
                <p id="rateRange"><strong>å»ºè®®åˆ©ç‡ï¼š</strong>4.5% - 5.5%</p>
                <p id="defaultRate"><strong>é¢„æœŸè¿çº¦ç‡ï¼š</strong>1.8%</p>
                <div id="conditions"></div>
            </div>
        </div>

        <div class="report-section" id="riskAlertsSection">
            <h3 class="section-title">âš ï¸ é£é™©è­¦ç¤º</h3>
            <div id="riskAlerts"></div>
        </div>

        <div class="report-section">
            <h3 class="section-title">ğŸ’¬ AIè¾…åŠ©æé—® <span style="font-size: 13px; color: #666; font-weight: normal;" id="questionCount">(5ä¸ªå»ºè®®é—®é¢˜)</span></h3>
            <div style="padding: 16px; background: #e8f5e9; border-radius: 8px;" id="questions"></div>
        </div>

        <div class="report-section">
            <h3 class="section-title">ğŸ“‹ å†³ç­–ä¾æ®</h3>
            <p><strong>æ•°æ®æ¥æºï¼š</strong>CRMç³»ç»Ÿã€äººè¡Œå¾ä¿¡ã€ç¤¾ä¿å…¬ç§¯é‡‘ã€é“¶è¡Œæµæ°´</p>
            <p><strong>æ¨¡å‹ç‰ˆæœ¬ï¼š</strong>v2.1.0</p>
            <p><strong>AIç½®ä¿¡åº¦ï¼š</strong>85%</p>
            <div style="margin-top: 16px; padding: 12px; background: #fff9c4; border-radius: 4px;">
                <p style="font-size: 13px;">âš ï¸ <strong>å…è´£å£°æ˜ï¼š</strong>æœ¬æŠ¥å‘Šç”±AIç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œä»…ä¾›å‚è€ƒã€‚æœ€ç»ˆä¿¡å®¡å†³ç­–éœ€ç”±ä¸“ä¸šä¿¡å®¡å‘˜åŸºäºå®Œæ•´ä¿¡æ¯è¿›è¡Œäººå·¥å¤æ ¸å’Œåˆ¤æ–­ã€‚</p>
            </div>
        </div>

        <div style="margin-top: 32px; padding-top: 24px; border-top: 1px solid #e0e0e0; text-align: center; color: #999; font-size: 12px;">
            <p>Â© 2024 å¤§ä¼—æ±½è½¦é‡‘èæœåŠ¡æœ‰é™å…¬å¸ | AIä¿¡å®¡æŠ¥å‘Šç³»ç»Ÿ v1.0</p>
        </div>
    </div>

    <style>
        .risk-score.level-d { background: linear-gradient(135deg, #ff9800, #ffb74d); color: white; }
        .risk-score.level-e { background: linear-gradient(135deg, #f44336, #e57373); color: white; }
        .decision-reject { background: #ffebee; border-left-color: #f44336; }
        .alert-high { padding: 12px; background: #ffebee; border-left: 4px solid #f44336; margin-bottom: 8px; border-radius: 4px; }
        .alert-medium { padding: 12px; background: #fff3e0; border-left: 4px solid #ff9800; margin-bottom: 8px; border-radius: 4px; }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        const cases = {
            case1: { 
                name: 'å¼ **', gender: 'ç”·', age: 35, product: 'æ–°è½¦è´·æ¬¾', amount: '300,000', term: 36, vehicle: 'å¤§ä¼—é€”è§‚L 2024æ¬¾',
                reportNum: 'CA20241112001', score: 850, level: 'ä¼˜è´¨å®¢æˆ·', levelClass: 'level-a', 
                dsr: 28, ltv: 65, income: '35,000', creditScore: 780, overdue: 0, 
                ragFinancial: 'ä¼ä¸šè¥æ”¶ç¨³å®šå¢é•¿ï¼Œè¿‘ä¸‰å¹´å¹´å‡å¢é•¿ç‡15%ï¼Œç°é‡‘æµå……è£•ï¼Œèµ„äº§è´Ÿå€ºç‡å¥åº·', 
                ragThirdParty: 'å¾ä¿¡è®°å½•ä¼˜ç§€ï¼Œæ— é€¾æœŸè®°å½•ï¼Œç¤¾ä¿å…¬ç§¯é‡‘è¿ç»­ç¼´çº³60ä¸ªæœˆï¼Œæ”¶å…¥ç¨³å®šå¯é ', 
                ragSentiment: 'æœªå‘ç°è´Ÿé¢æ–°é—»ï¼Œæ‰€åœ¨è¡Œä¸šå‘å±•ç¨³å®šï¼Œä¼ä¸šä¿¡èª‰è‰¯å¥½ï¼Œæ— å¸æ³•è¯‰è®¼è®°å½•', 
                recommendations: ['å®¢æˆ·èµ„è´¨ä¼˜ç§€ï¼Œå»ºè®®å¿«é€Ÿå®¡æ‰¹é€šè¿‡ï¼Œå¯ä½œä¸ºä¼˜è´¨å®¢æˆ·é‡ç‚¹ç»´æŠ¤', 'æ”¶å…¥ç¨³å®šä¸”è´Ÿå€ºç‡ä½ï¼Œå»ºè®®æä¾›ä¼˜æƒ åˆ©ç‡ä»¥å¢å¼ºå®¢æˆ·ç²˜æ€§', 'å¯æ¨èå…¶ä»–é‡‘èäº§å“ï¼Œå¦‚ä¿¡ç”¨å¡ã€ç†è´¢ç­‰å¢å€¼æœåŠ¡'], 
                decision: 'âœ… æ‰¹å‡†', decisionClass: 'decision-approve', 
                loanRange: 'Â¥300,000 - Â¥350,000', rateRange: '3.5% - 4.0%', defaultRate: '0.3%', 
                conditions: [], 
                questions: ['è¯·é—®æ‚¨é€‰æ‹©è¿™æ¬¾è½¦å‹çš„ä¸»è¦è€ƒè™‘å› ç´ æ˜¯ä»€ä¹ˆï¼Ÿ', 'æ‚¨è®¡åˆ’ä½¿ç”¨å“ªä¸ªè´¦æˆ·è¿›è¡Œæœˆä¾›è¿˜æ¬¾ï¼Ÿ', 'æ˜¯å¦éœ€è¦äº†è§£æˆ‘ä»¬çš„è½¦è¾†ä¿é™©å’Œå»¶ä¿æœåŠ¡ï¼Ÿ'],
                alerts: { high: [], medium: [], low: ['å»ºè®®å®šæœŸè·Ÿè¿›å®¢æˆ·è¿˜æ¬¾æƒ…å†µ', 'å¯æ¨èå¢å€¼æœåŠ¡æå‡å®¢æˆ·ä»·å€¼'] }
            },
            case2: { 
                name: 'æ**', gender: 'å¥³', age: 32, product: 'æ–°è½¦è´·æ¬¾', amount: '250,000', term: 36, vehicle: 'å¤§ä¼—å¸•è¨ç‰¹ 2024æ¬¾',
                reportNum: 'CA20241112002', score: 720, level: 'è‰¯å¥½å®¢æˆ·', levelClass: 'level-b', 
                dsr: 42, ltv: 75, income: '22,000', creditScore: 690, overdue: 0, 
                ragFinancial: 'ä¼ä¸šç»è¥ç¨³å®šï¼Œè¥æ”¶ç•¥æœ‰æ³¢åŠ¨ä½†æ•´ä½“å‘å¥½ï¼Œç°é‡‘æµåŸºæœ¬æ»¡è¶³éœ€æ±‚', 
                ragThirdParty: 'å¾ä¿¡è®°å½•è‰¯å¥½ï¼Œæ— é€¾æœŸï¼Œç¤¾ä¿å…¬ç§¯é‡‘è¿ç»­ç¼´çº³36ä¸ªæœˆï¼Œæ”¶å…¥æ¥æºç¨³å®š', 
                ragSentiment: 'æœªå‘ç°é‡å¤§è´Ÿé¢ä¿¡æ¯ï¼Œè¡Œä¸šå‘å±•å¹³ç¨³ï¼Œä¼ä¸šè¿è¥æ­£å¸¸', 
                recommendations: ['è´Ÿå€ºç‡åé«˜(42%)ï¼Œéœ€é‡ç‚¹æ ¸å®å…¶ä»–è´·æ¬¾çš„çœŸå®æƒ…å†µå’Œæœˆä¾›é‡‘é¢', 'å·¥ä½œå¹´é™è¾ƒçŸ­(3å¹´)ï¼Œå»ºè®®è¯„ä¼°æ”¶å…¥ç¨³å®šæ€§å’ŒèŒä¸šå‘å±•å‰æ™¯', 'é¦–æ¬¡è´­è½¦ï¼Œéœ€äº†è§£è´­è½¦ç”¨é€”å’Œè¯¦ç»†çš„è¿˜æ¬¾è®¡åˆ’'], 
                decision: 'âš ï¸ æœ‰æ¡ä»¶æ‰¹å‡†', decisionClass: 'decision-conditional', 
                loanRange: 'Â¥200,000 - Â¥250,000', rateRange: '4.5% - 5.5%', defaultRate: '1.8%', 
                conditions: ['å»ºè®®é™ä½è´·æ¬¾é‡‘é¢è‡³20ä¸‡å…ƒï¼Œä»¥é™ä½æœˆä¾›å‹åŠ›', 'éœ€æä¾›é¢å¤–çš„æ”¶å…¥è¯æ˜æˆ–èµ„äº§è¯æ˜', 'å»ºè®®å¢åŠ é¦–ä»˜æ¯”ä¾‹è‡³40%ä»¥ä¸Š'], 
                questions: ['æ‚¨ç›®å‰åä¸‹å…¶ä»–è´·æ¬¾çš„æœˆä¾›æ€»é¢æ˜¯å¤šå°‘ï¼Ÿ', 'æ‚¨çš„æ”¶å…¥æ¥æºæ˜¯å¦ç¨³å®šï¼Ÿæ˜¯å¦æœ‰å…¶ä»–æ”¶å…¥æ¥æºï¼Ÿ', 'é™¤äº†å·¥èµ„æ”¶å…¥ï¼Œæ‚¨æ˜¯å¦æœ‰å…¶ä»–èµ„äº§æˆ–æ”¶å…¥å¯ä»¥ç”¨äºè¿˜æ¬¾ï¼Ÿ', 'è¯·è¯´æ˜æ‚¨çš„è´­è½¦ç”¨é€”å’Œè¿˜æ¬¾è®¡åˆ’ï¼Ÿ', 'æ‚¨ç›®å‰çš„å·¥ä½œæ˜¯å¦ç¨³å®šï¼Ÿæœªæ¥æ˜¯å¦æœ‰æ™‹å‡æˆ–åŠ è–ªè®¡åˆ’ï¼Ÿ'],
                alerts: { high: [], medium: ['è´Ÿå€ºç‡åé«˜ï¼Œéœ€å…³æ³¨è¿˜æ¬¾èƒ½åŠ›', 'å·¥ä½œå¹´é™è¾ƒçŸ­ï¼Œæ”¶å…¥ç¨³å®šæ€§éœ€è¿›ä¸€æ­¥ç¡®è®¤'], low: ['å¾ä¿¡è®°å½•è‰¯å¥½ï¼Œæ— é€¾æœŸå†å²', 'ç¤¾ä¿å…¬ç§¯é‡‘æ­£å¸¸ç¼´çº³'] }
            },
            case3: { 
                name: 'ç‹**', gender: 'ç”·', age: 28, product: 'äºŒæ‰‹è½¦è´·æ¬¾', amount: '150,000', term: 24, vehicle: 'å¤§ä¼—è¿ˆè…¾ 2021æ¬¾',
                reportNum: 'CA20241112003', score: 580, level: 'ä¸€èˆ¬å®¢æˆ·', levelClass: 'level-c', 
                dsr: 55, ltv: 85, income: '15,000', creditScore: 620, overdue: 2, 
                ragFinancial: 'æ”¶å…¥æ°´å¹³ä¸€èˆ¬ï¼Œå­˜åœ¨ä¸€å®šæ³¢åŠ¨ï¼Œå‚¨è“„è¾ƒå°‘ï¼ŒæŠ—é£é™©èƒ½åŠ›æœ‰é™', 
                ragThirdParty: 'å¾ä¿¡è®°å½•ä¸€èˆ¬ï¼Œå­˜åœ¨2æ¬¡é€¾æœŸè®°å½•(å·²ç»“æ¸…)ï¼Œç¤¾ä¿ç¼´çº³18ä¸ªæœˆ', 
                ragSentiment: 'æœªå‘ç°é‡å¤§è´Ÿé¢ä¿¡æ¯ï¼Œä½†æ‰€åœ¨è¡Œä¸šç«äº‰æ¿€çƒˆï¼Œå°±ä¸šç¨³å®šæ€§ä¸€èˆ¬', 
                recommendations: ['è´Ÿå€ºç‡è¿‡é«˜(55%)ï¼Œä¸¥é‡è¶…æ ‡ï¼Œéœ€è¯¦ç»†æ ¸å®æ‰€æœ‰è´Ÿå€ºæƒ…å†µ', 'å­˜åœ¨é€¾æœŸè®°å½•ï¼Œéœ€äº†è§£é€¾æœŸåŸå› å’Œå½“å‰è¿˜æ¬¾èƒ½åŠ›æ”¹å–„æƒ…å†µ', 'LTVæ¯”ä¾‹è¿‡é«˜(85%)ï¼Œå»ºè®®è¦æ±‚å¢åŠ é¦–ä»˜æˆ–é™ä½è´·æ¬¾é‡‘é¢', 'å·¥ä½œç¨³å®šæ€§è¾ƒå·®ï¼Œéœ€è¯„ä¼°èŒä¸šå‰æ™¯å’Œæ”¶å…¥å¢é•¿æ½œåŠ›'], 
                decision: 'âš ï¸ æœ‰æ¡ä»¶æ‰¹å‡†', decisionClass: 'decision-conditional', 
                loanRange: 'Â¥100,000 - Â¥120,000', rateRange: '6.0% - 7.5%', defaultRate: '4.2%', 
                conditions: ['å¿…é¡»é™ä½è´·æ¬¾é‡‘é¢è‡³12ä¸‡å…ƒä»¥ä¸‹', 'å¿…é¡»æä¾›æœ‰æ•ˆæ‹…ä¿äººæˆ–æŠµæŠ¼ç‰©', 'éœ€è¦æä¾›é¢å¤–çš„æ”¶å…¥è¯æ˜å’Œèµ„äº§è¯æ˜', 'å»ºè®®ç¼©çŸ­è´·æ¬¾æœŸé™è‡³18ä¸ªæœˆ', 'éœ€è¦ä¸»ç®¡çº§åˆ«å®¡æ‰¹'], 
                questions: ['è¯·è¯¦ç»†è¯´æ˜æ‚¨ä¹‹å‰ä¸¤æ¬¡é€¾æœŸçš„å…·ä½“åŸå› ï¼Ÿ', 'è¯·åˆ—å‡ºæ‚¨ç›®å‰æ‰€æœ‰çš„è´·æ¬¾å’Œä¿¡ç”¨å¡è´Ÿå€ºæ˜ç»†ï¼Ÿ', 'æ‚¨ç›®å‰çš„æœˆæ”¶å…¥æ˜¯å¦è¶³ä»¥è¦†ç›–æ‰€æœ‰æœˆä¾›ï¼Ÿ', 'æ‚¨æ˜¯å¦æœ‰æˆ¿äº§ã€å­˜æ¬¾æˆ–å…¶ä»–èµ„äº§å¯ä»¥ä½œä¸ºè¿˜æ¬¾ä¿éšœï¼Ÿ', 'æ˜¯å¦å¯ä»¥æä¾›æœ‰ç¨³å®šæ”¶å…¥çš„æ‹…ä¿äººï¼Ÿ'],
                alerts: { high: ['è´Ÿå€ºç‡ä¸¥é‡è¶…æ ‡(55%)ï¼Œè¿œè¶…å®‰å…¨çº¿', 'å­˜åœ¨é€¾æœŸè®°å½•ï¼Œä¿¡ç”¨é£é™©è¾ƒé«˜'], medium: ['LTVæ¯”ä¾‹è¿‡é«˜ï¼Œè½¦è¾†è´¬å€¼é£é™©å¤§', 'å·¥ä½œå¹´é™çŸ­ï¼Œæ”¶å…¥ç¨³å®šæ€§å­˜ç–‘', 'å‚¨è“„ä¸è¶³ï¼ŒæŠ—é£é™©èƒ½åŠ›å¼±'], low: [] }
            },
            case4: { 
                name: 'èµµ**', gender: 'ç”·', age: 45, product: 'æ–°è½¦è´·æ¬¾', amount: '400,000', term: 48, vehicle: 'å¤§ä¼—é€”é” 2024æ¬¾',
                reportNum: 'CA20241112004', score: 420, level: 'å…³æ³¨å®¢æˆ·', levelClass: 'level-d', 
                dsr: 68, ltv: 90, income: '18,000', creditScore: 550, overdue: 5, 
                ragFinancial: 'æ”¶å…¥ä¸ç¨³å®šï¼Œå­˜åœ¨æ˜æ˜¾ä¸‹é™è¶‹åŠ¿ï¼Œè´Ÿå€ºæ²‰é‡ï¼Œç°é‡‘æµç´§å¼ ', 
                ragThirdParty: 'å¾ä¿¡è®°å½•è¾ƒå·®ï¼Œå¤šæ¬¡é€¾æœŸ(5æ¬¡)ï¼Œéƒ¨åˆ†é€¾æœŸæœªç»“æ¸…ï¼Œç¤¾ä¿æ–­ç¼´', 
                ragSentiment: 'å‘ç°å¤šæ¡è´Ÿé¢ä¿¡æ¯ï¼Œæ¶‰åŠæ°‘äº‹è¯‰è®¼ï¼Œæ‰€åœ¨ä¼ä¸šç»è¥å›°éš¾', 
                recommendations: ['å¤šæ¬¡é€¾æœŸä¸”éƒ¨åˆ†æœªç»“æ¸…ï¼Œä¿¡ç”¨é£é™©æé«˜ï¼Œå¼ºçƒˆå»ºè®®æ‹’ç»', 'è´Ÿå€ºç‡ä¸¥é‡è¶…æ ‡(68%)ï¼Œå·²æ— è¿˜æ¬¾èƒ½åŠ›ï¼Œè¿çº¦é£é™©æå¤§', 'å­˜åœ¨æ°‘äº‹è¯‰è®¼ï¼Œæ³•å¾‹é£é™©é«˜ï¼Œå¯èƒ½å½±å“è¿˜æ¬¾', 'ç”³è¯·é‡‘é¢ä¸æ”¶å…¥ä¸¥é‡ä¸åŒ¹é…ï¼Œå­˜åœ¨æ¬ºè¯ˆå«Œç–‘', 'ç¤¾ä¿æ–­ç¼´ï¼Œå°±ä¸šçŠ¶å†µä¸æ˜ï¼Œæ”¶å…¥æ¥æºå­˜ç–‘'], 
                decision: 'âŒ æ‹’ç»', decisionClass: 'decision-reject', 
                loanRange: 'ä¸å»ºè®®æ”¾è´·', rateRange: 'N/A', defaultRate: '8.5%', 
                conditions: ['å»ºè®®æ‹’ç»æœ¬æ¬¡ç”³è¯·', 'å¦‚å®¢æˆ·åšæŒç”³è¯·ï¼Œéœ€æä¾›å……è¶³æŠµæŠ¼ç‰©', 'éœ€è¦ä¼ä¸šæ³•äººæˆ–é«˜å‡€å€¼äººå£«æ‹…ä¿', 'å¿…é¡»å…ˆç»“æ¸…æ‰€æœ‰é€¾æœŸæ¬¾é¡¹'], 
                questions: ['è¯·è¯´æ˜æ‚¨ç›®å‰æœªç»“æ¸…çš„é€¾æœŸè´·æ¬¾æƒ…å†µï¼Ÿ', 'è¯·è¯´æ˜æ‚¨ç›®å‰æ¶‰åŠçš„æ°‘äº‹è¯‰è®¼è¯¦æƒ…ï¼Ÿ', 'æ‚¨ç›®å‰çš„çœŸå®æ”¶å…¥æ¥æºæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä½•ç¤¾ä¿æ–­ç¼´ï¼Ÿ', 'ä»¥æ‚¨ç›®å‰çš„æ”¶å…¥çŠ¶å†µï¼Œä¸ºä½•è¦è´­ä¹°å¦‚æ­¤é«˜ä»·çš„è½¦è¾†ï¼Ÿ'],
                alerts: { high: ['å¤šæ¬¡é€¾æœŸä¸”éƒ¨åˆ†æœªç»“æ¸…ï¼Œè¿çº¦é£é™©æé«˜', 'è´Ÿå€ºç‡68%ï¼Œä¸¥é‡è¶…æ ‡ï¼Œæ— è¿˜æ¬¾èƒ½åŠ›', 'å­˜åœ¨æ°‘äº‹è¯‰è®¼ï¼Œæ³•å¾‹é£é™©é«˜', 'ç¤¾ä¿æ–­ç¼´ï¼Œå°±ä¸šçŠ¶å†µä¸æ˜', 'ç”³è¯·é‡‘é¢ä¸æ”¶å…¥ä¸¥é‡ä¸åŒ¹é…'], medium: ['LTVæ¯”ä¾‹è¿‡é«˜(90%)ï¼ŒæŠµæŠ¼ç‰©ä¸è¶³', 'å¹´é¾„åå¤§ï¼Œè¿˜æ¬¾æœŸé™è¿‡é•¿'], low: [] }
            },
            case5: { 
                name: 'åˆ˜**', gender: 'å¥³', age: 38, product: 'æ–°è½¦è´·æ¬¾', amount: '350,000', term: 36, vehicle: 'å¤§ä¼—é€”æ˜‚ 2024æ¬¾',
                reportNum: 'CA20241112005', score: 280, level: 'æ‹’ç»å®¢æˆ·', levelClass: 'level-e', 
                dsr: 85, ltv: 95, income: '12,000', creditScore: 480, overdue: 12, 
                ragFinancial: 'æ”¶å…¥æä½ä¸”ä¸ç¨³å®šï¼Œè´Ÿå€ºç´¯ç´¯ï¼Œå·²èµ„ä¸æŠµå€ºï¼Œç°é‡‘æµæ–­è£‚', 
                ragThirdParty: 'å¾ä¿¡è®°å½•æå·®ï¼Œé•¿æœŸå¤šæ¬¡é€¾æœŸ(12æ¬¡)ï¼Œå¤šç¬”è´·æ¬¾é€¾æœŸæœªè¿˜ï¼Œè¢«åˆ—å…¥å¤±ä¿¡åå•', 
                ragSentiment: 'å‘ç°å¤§é‡è´Ÿé¢ä¿¡æ¯ï¼Œæ¶‰åŠå¤šèµ·è¯‰è®¼å’Œå¼ºåˆ¶æ‰§è¡Œï¼Œä¼ä¸šå·²ç ´äº§æ¸…ç®—', 
                recommendations: ['âš ï¸ å®¢æˆ·å·²è¢«åˆ—å…¥å¤±ä¿¡åå•ï¼Œä¸¥ç¦æ”¾è´·ï¼Œç«‹å³æ‹’ç»', 'âš ï¸ è´Ÿå€ºç‡85%ï¼Œå·²å®Œå…¨ä¸§å¤±è¿˜æ¬¾èƒ½åŠ›ï¼Œè¿çº¦æ¦‚ç‡æ¥è¿‘100%', 'âš ï¸ æ¶‰åŠå¤šèµ·è¯‰è®¼å’Œå¼ºåˆ¶æ‰§è¡Œï¼Œå­˜åœ¨ä¸¥é‡æ³•å¾‹é£é™©', 'âš ï¸ ç–‘ä¼¼æ¬ºè¯ˆè¡Œä¸ºï¼Œç”³è¯·é‡‘é¢ä¸å®é™…èƒ½åŠ›ä¸¥é‡ä¸ç¬¦', 'âš ï¸ å»ºè®®å°†å®¢æˆ·åˆ—å…¥é»‘åå•ï¼Œæ°¸ä¹…æ‹’ç»ä¸šåŠ¡å¾€æ¥'], 
                decision: 'âŒ ç«‹å³æ‹’ç»', decisionClass: 'decision-reject', 
                loanRange: 'ä¸¥ç¦æ”¾è´·', rateRange: 'N/A', defaultRate: '15.8%', 
                conditions: ['ç«‹å³æ‹’ç»ç”³è¯·', 'å°†å®¢æˆ·åˆ—å…¥é»‘åå•', 'ä¸ŠæŠ¥é£æ§éƒ¨é—¨è¿›è¡Œæ¬ºè¯ˆè°ƒæŸ¥', 'é€šçŸ¥ç›¸å…³éƒ¨é—¨æ³¨æ„é˜²èŒƒ'], 
                questions: [],
                alerts: { high: ['âš ï¸ å®¢æˆ·å·²è¢«åˆ—å…¥å¤±ä¿¡åå•ï¼Œä¸¥ç¦æ”¾è´·', 'âš ï¸ è´Ÿå€ºç‡85%ï¼Œå®Œå…¨ä¸§å¤±è¿˜æ¬¾èƒ½åŠ›', 'âš ï¸ é•¿æœŸå¤šæ¬¡é€¾æœŸï¼Œä¿¡ç”¨æå·®', 'âš ï¸ æ¶‰åŠå¤šèµ·è¯‰è®¼å’Œå¼ºåˆ¶æ‰§è¡Œ', 'âš ï¸ ç–‘ä¼¼æ¬ºè¯ˆè¡Œä¸ºï¼Œéœ€ä¸ŠæŠ¥è°ƒæŸ¥', 'âš ï¸ ç”³è¯·é‡‘é¢ä¸æ”¶å…¥ä¸¥é‡ä¸åŒ¹é…', 'âš ï¸ æ‰€åœ¨ä¼ä¸šå·²ç ´äº§æ¸…ç®—'], medium: [], low: [] }
            }
        };

        function switchCase(caseId) {
            const d = cases[caseId];
            document.getElementById('reportNum').textContent = d.reportNum;
            document.getElementById('name').textContent = d.name;
            document.getElementById('gender').textContent = d.gender;
            document.getElementById('age').textContent = d.age + 'å²';
            document.getElementById('product').textContent = d.product;
            document.getElementById('amount').textContent = 'Â¥' + d.amount;
            document.getElementById('term').textContent = d.term + 'æœŸ';
            
            const riskScore = document.getElementById('riskScore');
            riskScore.className = 'risk-score ' + d.levelClass;
            document.getElementById('score').textContent = d.score;
            document.getElementById('level').textContent = d.level;
            document.getElementById('indicators').textContent = `DSR: ${d.dsr}% | LTV: ${d.ltv}% | æœˆæ”¶å…¥: Â¥${d.income} | å¾ä¿¡åˆ†: ${d.creditScore} | é€¾æœŸ: ${d.overdue}æ¬¡`;
            
            document.getElementById('ragFinancial').textContent = d.ragFinancial;
            document.getElementById('ragThirdParty').textContent = d.ragThirdParty;
            document.getElementById('ragSentiment').textContent = d.ragSentiment;
            
            document.getElementById('recommendations').innerHTML = d.recommendations.map((r, i) => 
                `<div class="recommendation-item"><div class="recommendation-number">${i+1}</div><div><p>${r}</p></div></div>`
            ).join('');
            
            const decisionBox = document.getElementById('decisionBox');
            decisionBox.className = 'decision-box ' + d.decisionClass;
            document.getElementById('decision').textContent = d.decision;
            document.getElementById('loanRange').innerHTML = `<strong>å»ºè®®é¢åº¦ï¼š</strong>${d.loanRange}`;
            document.getElementById('rateRange').innerHTML = `<strong>å»ºè®®åˆ©ç‡ï¼š</strong>${d.rateRange}`;
            document.getElementById('defaultRate').innerHTML = `<strong>é¢„æœŸè¿çº¦ç‡ï¼š</strong>${d.defaultRate}`;
            
            document.getElementById('conditions').innerHTML = d.conditions.length > 0 ? 
                `<p style="margin-top: 16px;"><strong>é™„åŠ æ¡ä»¶ï¼š</strong></p><ul style="margin-left: 20px; margin-top: 8px;">${d.conditions.map(c => `<li>${c}</li>`).join('')}</ul>` : '';
            
            // é£é™©è­¦ç¤º
            const alerts = d.alerts;
            let alertsHTML = '';
            if (alerts.high.length > 0) {
                alertsHTML += alerts.high.map(a => `<div class="alert-high"><strong>ğŸ”´ é«˜é£é™©ï¼š</strong>${a}</div>`).join('');
            }
            if (alerts.medium.length > 0) {
                alertsHTML += alerts.medium.map(a => `<div class="alert-medium"><strong>ğŸŸ¡ ä¸­é£é™©ï¼š</strong>${a}</div>`).join('');
            }
            if (alerts.low.length > 0) {
                alertsHTML += alerts.low.map(a => `<div style="padding: 12px; background: #e8f5e9; border-left: 4px solid #4caf50; margin-bottom: 8px; border-radius: 4px;"><strong>ğŸŸ¢ ä½é£é™©ï¼š</strong>${a}</div>`).join('');
            }
            document.getElementById('riskAlerts').innerHTML = alertsHTML || '<p style="color: #666;">æš‚æ— é£é™©è­¦ç¤º</p>';
            
            // æ˜¾ç¤ºæˆ–éšè—é£é™©è­¦ç¤ºåŒºåŸŸ
            document.getElementById('riskAlertsSection').style.display = alertsHTML ? 'block' : 'none';
            
            // AIè¾…åŠ©æé—®
            document.getElementById('questionCount').textContent = d.questions.length > 0 ? `(${d.questions.length}ä¸ªå»ºè®®é—®é¢˜)` : '(æ— éœ€é¢å¤–æé—®)';
            document.getElementById('questions').innerHTML = d.questions.length > 0 ? 
                d.questions.map((q, i) => `<p style="margin-bottom: 12px;"><strong>Q${i+1}:</strong> ${q}</p>`).join('') :
                '<p style="color: #666;">å®¢æˆ·èµ„è´¨ä¼˜ç§€ï¼Œæ— éœ€é¢å¤–æé—®</p>';
        }

        window.onload = () => {
            // ä»URLå‚æ•°è·å–æ¡ˆä¾‹ID
            const urlParams = new URLSearchParams(window.location.search);
            const caseId = urlParams.get('case') || 'case2';
            
            // æ›´æ–°ä¸‹æ‹‰èœå•é€‰ä¸­çŠ¶æ€
            document.querySelector('.case-selector').value = caseId;
            
            // åŠ è½½æ¡ˆä¾‹
            switchCase(caseId);
        };

        function exportToPDF() {
            const btn = document.getElementById('exportBtn');
            btn.textContent = 'â³ ç”Ÿæˆä¸­...';
            btn.disabled = true;
            
            html2pdf().set({
                margin: 10,
                filename: 'VWä¿¡å®¡æŠ¥å‘Š_' + Date.now() + '.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            }).from(document.querySelector('.report-container')).save().then(() => {
                btn.textContent = 'ğŸ“„ å¯¼å‡ºPDF';
                btn.disabled = false;
                alert('âœ… PDFå¯¼å‡ºæˆåŠŸï¼');
            });
        }
    </script>
</body>
</html>
